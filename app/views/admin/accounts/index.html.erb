<div class="mt-10 bg-gray-50 flex flex-col gap-8 items-center justify-center mb-5">
   <h2 class="text-gray-700 font-bold text-xl">Add New Credit Note</h2>
  <div class="bg-white rounded-2xl shadow-lg p-8 w-full max-w-4xl">
    <%= form_with model: @user, 
              url: admin_accounts_add_credit_path, 
              local: true, 
              class: "grid grid-cols-2 gap-6" do |form| %>      <!-- User Name -->
      <div>
        <label class="block text-sm font-medium text-gray-700">User Name*</label>
        <input type="text" name="username" placeholder="Enter name"
          class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required />
      </div>

      <!-- User Code -->
      <div>
        <label class="block text-sm font-medium text-gray-700">User Type</label>
        <input type="text" name="usertype" placeholder="Enter User Type"
          class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required />
      </div>

      <!-- Mobile Number -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Mobile Number*</label>
        <input type="text" name="phone_number" placeholder="Enter 10 digit number."
          class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required />
      </div>

      <!-- Amount -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Amount (₹)</label>
        <input type="number" name="amount" placeholder="Enter amount"
          class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required />
      </div>

      <!-- Type -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Type*</label>
        <input type="text" name="type" value="Credit" readonly
          class="mt-1 w-full border rounded-lg px-3 py-2 bg-gray-100 text-gray-600 cursor-not-allowed" required />
      </div>

      <!-- Reason -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Reason*</label>
        <select
          name="reason"
          class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
          <option>Select Reason</option>
          <option>Reason 1</option>
          <option>Reason 2</option>
        </select>
      </div>

      <!-- Date -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Date*</label>
        <input type="text" value="30-08-2025" readonly
          class="mt-1 w-full border rounded-lg px-3 py-2 bg-gray-100 text-gray-600 cursor-not-allowed" required />
      </div>

      <!-- Remarks -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Remarks</label>
        <input type="text" placeholder="Enter remarks"
          class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required />
      </div>

      <!-- Approved By -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Approved By</label>
        <input type="text" value="Admin Name" readonly
          class="mt-1 w-full border rounded-lg px-3 py-2 bg-gray-100 text-gray-600 cursor-not-allowed" />
      </div>

      <!-- Transaction Password -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Transaction Password*</label>
        <input type="password" name="set_pin" placeholder="Enter password"
          class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required />
      </div>

      <!-- Buttons -->
      <div class="col-span-2 flex justify-center space-x-4 mt-4">
           <button type="submit"
          class="bg-blue-600 text-white px-6 py-2 rounded-lg shadow hover:bg-blue-700">Save Credit</button>
      </div>
    <%end%>
  </div>
</div>


<div class="bg-gray-50 flex flex-col items-center justify-center p-6 mb-2">
  <div class="bg-white  rounded-lg shadow-md w-full p-4">
    <!-- Search -->
    <div class="relative mb-4">
      <input 
        type="text" 
        placeholder="Search within table"
        class="w-full border border-gray-300 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <svg xmlns="http://www.w3.org/2000/svg" 
           class="h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" 
           fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
      </svg>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
      <table class="w-full border border-gray-300">
        <thead class="bg-gray-100 border-b">
          <tr>
            <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 border-r">UserName</th>
            <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 border-r">UserType</th>
            <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 border-r">Mobile</th>
            <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 border-r">Txn ID</th>
            <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 border-r">Type</th>
            <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 border-r">Amount</th>
            <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 border-r">Reason</th>
            <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 border-r">Date/Time</th>
          </tr>
        </thead>
        <tbody class="divide-y">
          <!-- Example Row -->
          <%@account_transaction.each do |trn|%>
          <tr>
            <td class="px-4 py-2 text-sm text-gray-600 border-r"><%=trn.user.username%></td>
            <td class="px-4 py-2 text-sm text-gray-600 border-r"><%=trn.user.role.title%></td>
            <td class="px-4 py-2 text-sm text-gray-600 border-r"><%=trn.mobile%></td>
            <td class="px-4 py-2 text-sm text-gray-600 border-r"><%=trn.txn_id%></td>
            <td class="px-4 py-2 text-sm text-gray-600 border-r"><%=trn.txn_type%></td>
            <td class="px-4 py-2 text-sm text-gray-600 border-r">₹<%=trn.amount%></td>
            <td class="px-4 py-2 text-sm text-gray-600 border-r"><%=trn.reason%></td>
            <td class="px-4 py-2 text-sm text-gray-600 border-r"><%=trn.created_at.strftime("%Y-%m-%d")%></td>
          </tr>
          <%end%>

          <!-- Empty State -->
        </tbody>
      </table>
    </div>

  </div>
</div>

<% if flash.any? %>
  <div id="flashModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-xl p-6 relative">
      <!-- Close Button -->
      <% flash.each do |key, message| %>
        <div class="mb-4 p-4 rounded-lg 
                    <%= key == 'notice' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700' %>">
          <%= message %>
        </div>
      <% end %>

      <div class="flex justify-center">
        <button onclick="document.getElementById('flashModal').remove()" 
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
          OK
        </button>
      </div>
    </div>
  </div>
<% end %>

