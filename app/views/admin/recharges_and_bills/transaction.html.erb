
  <div class="container mx-auto px-4 py-6" data-controller="search">
    
    <!-- Header -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
      <h1 class="text-xl sm:text-2xl font-bold text-gray-800">Transaction History</h1>
      <button 
        class="flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition w-full sm:w-auto justify-center"
      >
        <!-- Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"/>
        </svg>
        Export
      </button>
    </div>

    <!-- Tabs -->
    <div class="flex flex-wrap border-b border-gray-200 mb-6">
      <% tab_types = {
        "all" => "All Transactions",
        "Mobile Recharge" => "Mobile Recharge",
        "DTH Recharge" => "DTH Recharge",
        "Water Bill" => "Water Bill",
        "Electricity Bill" => "Electricity Bill",
        "Gas Bill" => "Gas Bill"
      } %>

      <% tab_types.each do |type, label| %>
        <a href="<%= admin_recharges_and_bills_transaction_path(type: type) %>" 
           class="py-2 px-4 text-sm sm:text-base font-medium <%= 'text-blue-600 border-b-2 border-blue-600' if params[:type] == type || (type == 'all' && params[:type].blank?) %> <%= 'text-gray-600' unless params[:type] == type || (type == 'all' && params[:type].blank?) %>">
          <%= label %>
        </a>
      <% end %>
    </div>


    <!-- Search -->
      <div class="mb-4">
        <form action="<%= admin_recharges_and_bills_transaction_path %>" method="get" class="flex items-center border rounded-lg overflow-hidden max-w-md w-full bg-white">
          <!-- Search icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mx-3 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18a7.5 7.5 0 006.15-3.35z"/>
          </svg>

          <input
            type="text"
            name="search"
            value="<%= params[:search] %>"
            placeholder="Search by ID, Mobile, Account, Operator, Date..."
            class="flex-1 px-3 py-3 text-sm outline-none"
          />

          <!-- Search Button -->
          <div class="flex">
              <button type="submit" class="px-4 py-3 bg-blue-600 text-white text-sm font-medium hover:bg-blue-700">
                Search
              </button>

              <!-- Cancel Button -->
              <a href="<%= admin_recharges_and_bills_transaction_path %>" class="px-4 py-3 bg-gray-200 text-gray-700 text-sm font-medium hover:bg-gray-300">
                Cancel
              </a>
          </div>
        </form>
      </div>



    <!-- Table -->
    <div class="bg-white shadow-md rounded-lg overflow-hidden">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 text-sm">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">TX ID</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Service Type</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Operator</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Counsumar No</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Amount</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Date & Time</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Action</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% @tr.each do |trn|%>
             <tr class="hover:bg-gray-50">
              <td class="px-4 py-3 font-medium text-gray-900"><%=trn.tx_id%></td>
              <td class="px-4 py-3 text-gray-600"><%=trn.transaction_type%></td>
              <td class="px-4 py-3 text-gray-600"><%=trn.operator%></td>
              <td class="px-4 py-3 text-gray-600"><%=trn.account_or_mobile%></td>
              <td class="px-4 py-3 font-semibold text-gray-900">₹<%=trn.amount%></td>
              <td class="px-4 py-3 text-gray-600"><%= trn.created_at.strftime("%d/%m/%Y") %></td>
              <td class="px-4 py-3">
                <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Success</span>
              </td>
              <td class="px-4 py-3">
                <button class="text-green-600 hover:text-green-900 text-sm">View</button>
              </td>
            </tr>
            <%end%>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal (hidden by default, toggle with JS) -->
    <div class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4 hidden" id="transactionModal">
      <div class="bg-white p-6 rounded-lg shadow-lg max-w-lg w-full">
        <h3 class="text-lg font-bold mb-4">Transaction Details - TX12345</h3>
        <div class="space-y-2 text-sm">
          <p><strong>Type:</strong> Mobile Recharge</p>
          <p><strong>Operator:</strong> Airtel</p>
          <p><strong>Account/Mobile:</strong> 9876543210</p>
          <p><strong>Amount:</strong> ₹199</p>
          <p><strong>Date:</strong> 02-Sep-2025, 10:30 AM</p>
          <p><strong>Status:</strong> Success</p>
        </div>

        <!-- Remark -->
        <div class="mt-4">
          <label class="block text-sm font-medium mb-1">Remark:</label>
          <textarea class="w-full px-3 py-2 border rounded" placeholder="Enter your remarks here..."></textarea>
        </div>

        <!-- Upload -->
        <div class="mt-4">
          <label class="block text-sm font-medium mb-1">Upload File:</label>
          <input type="file" class="w-full"/>
          <p class="text-xs mt-1 text-gray-600">Selected: sample.pdf</p>
        </div>

        <!-- Buttons -->
        <div class="mt-4 flex flex-col sm:flex-row justify-end gap-2">
          <button class="bg-gray-500 text-white px-4 py-2 rounded w-full sm:w-auto">Close</button>
          <button class="bg-green-600 text-white px-4 py-2 rounded w-full sm:w-auto">Save</button>
        </div>
      </div>
    </div>

  </div>