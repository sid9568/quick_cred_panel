<body class="bg-gray-50">

  <div class="min-h-screen p-6">

    <!-- Header -->
    <div class="flex justify-between items-start">
      <div>
        <h1 class="text-3xl font-bold text-gray-900 mb-2">
          BBPS and Recharge & DTH Commission
        </h1>
        <p class="text-gray-600 mb-8">
          Manage and configure commission distribution for BBPS and Recharge & DTH Commission transactions
        </p>
      </div>

      <div class="mt-3">
        <a
          href="<%= superadmin_commissions_new_path(id: @services_id) %>"
          class="px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition inline-flex items-center gap-2"
        >
          ‚ûï Create BBPS Commission
        </a>
      </div>
    </div>

    <!-- TABLE -->
    <div class="max-w-[1460px] mx-auto bg-white rounded-xl shadow-md overflow-hidden mt-6">

      <% if @commissions.any? %>
        <table class="min-w-full border-collapse">
          <thead>
            <tr class="bg-yellow-100 text-gray-800 text-sm font-semibold">
              <th class="px-6 py-4 text-left">ID</th>
              <th class="px-6 py-4 text-left">SCHEME</th>
              <th class="px-6 py-4 text-left">COMMISSION TYPE</th>
              <th class="px-6 py-4 text-left">FROM ROLE</th>
              <th class="px-6 py-4 text-left">TO ROLE</th>
              <th class="px-6 py-4 text-left">VALUE</th>
              <th class="px-6 py-4 text-left">SERVICE ITEM</th>
              <th class="px-6 py-4 text-left">CREATED AT</th>
              <th class="px-6 py-4 text-left">ACTIONS</th>
            </tr>
          </thead>

          <tbody>
            <% @commissions.each do |commission| %>
              <tr class="border-b hover:bg-gray-50 transition">
                <td class="px-6 py-4 font-semibold text-gray-900">
                  #<%= commission.id %>
                </td>
                <td class="px-6 py-4 text-gray-700">
                  <%= commission.scheme&.scheme_name || 'N/A' %>
                </td>
                <td class="px-6 py-4 text-gray-700">
                  <%= commission.commission_type || 'Commission' %>
                </td>
                <td class="px-6 py-4 text-gray-700">
                  <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">
                    <%= commission.from_role || 'N/A' %>
                  </span>
                </td>
                <td class="px-6 py-4 text-gray-700">
                  <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">
                    <%= commission.to_role || 'N/A' %>
                  </span>
                </td>
                <td class="px-6 py-4 text-gray-700">
                  <span class="font-bold text-yellow-700">
                    <%= commission.value %>%
                  </span>
                </td>
                <td class="px-6 py-4 text-gray-700">
                  <%= commission.service_product_item&.name || 'N/A' %>
                </td>
                <td class="px-6 py-4 text-gray-700 text-sm">
                  <%= commission.created_at.strftime("%d %b %Y") %>
                </td>
                <td class="px-6 py-4">
                  <a
                    href="<%= edit_superadmin_commission_path(category_id: @services_id, id: commission.id) %>"
                    class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg shadow inline-flex items-center gap-2 text-sm"
                  >
                    ‚úèÔ∏è Edit
                  </a>
                  <%= link_to 'üóëÔ∏è Delete',
                        superadmin_commission_path(commission),
                        method: :delete,
                        data: { confirm: 'Are you sure you want to delete this commission?' },
                        class: "bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg shadow inline-flex items-center gap-2 text-sm mt-2" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <div class="p-12 text-center">
          <div class="text-gray-400 text-6xl mb-4">üìä</div>
          <h3 class="text-xl font-semibold text-gray-700 mb-2">No Commissions Found</h3>
          <p class="text-gray-500 mb-6">Create your first commission scheme to get started</p>
          <a
            href="<%= superadmin_commissions_new_path(id: @services_id) %>"
            class="px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition inline-flex items-center gap-2"
          >
            ‚ûï Create First Commission
          </a>
        </div>
      <% end %>
    </div>

    <!-- Pagination (optional) -->
    <% if @commissions.respond_to?(:total_pages) && @commissions.total_pages > 1 %>
      <div class="mt-8 flex justify-center">
        <div class="flex items-center gap-2">
          <% if @commissions.previous_page %>
            <a href="?page=<%= @commissions.previous_page %>" class="px-4 py-2 border rounded-lg hover:bg-gray-50">
              ‚Üê Previous
            </a>
          <% end %>
          
          <span class="px-4 py-2 text-gray-700">
            Page <%= @commissions.current_page %> of <%= @commissions.total_pages %>
          </span>
          
          <% if @commissions.next_page %>
            <a href="?page=<%= @commissions.next_page %>" class="px-4 py-2 border rounded-lg hover:bg-gray-50">
              Next ‚Üí
            </a>
          <% end %>
        </div>
      </div>
    <% end %>

  </div>